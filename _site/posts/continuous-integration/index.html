<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuous Integration</title>
    <meta name="description" content="How I setup this site to auto-deploy to my Dreamhost server">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="ronnie.fyi">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="ronnie.fyi">
    <link rel="icon" href="img/favicon.svg" type="image/x-icon"> 
    <!-- Matomo -->
    <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="https://ronniefyi.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/ronniefyi.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
    })();
    </script>
    <!-- End Matomo Code -->

  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">ronnie.fyi</a></h1>
      <ul class="nav">
        <li class="nav-item"><a href="/">Home</a></li>
        <li class="nav-item"><a href="/posts/">Archive</a></li>
        <li class="nav-item"><a href="/about/">About Me</a></li>
      </ul>
    </header>

    <main class="tmpl-post">

      <h1>Continuous Integration</h1>

<time datetime="2022-01-08">08 Jan 2022</time><a href="/tags/web-development/" class="post-tag">web development</a>

<p>Three posts in and I've already taken a week off from the site!</p>
<p>Well, that's not strictly true. I've been working (time permitting) on trying to get the site to automatically deploy to my hosting server, from the Github repo in which the code resides. I think I've got it now, so we're cooking with gas from here on out.</p>
<p>I referenced a few resources when trying to come up with a solution.</p>
<h2 id="watch-and-learn" tabindex="-1">Watch and Learn <a class="direct-link" href="#watch-and-learn" aria-hidden="true">#</a></h2>
<p><strong>Deploy To Shared Hosting With Github Actions</strong> from the <strong>Watch and Learn</strong> YouTube channel was my starting point, and from this, I managed (eventually, I had a few problems with Github's secrets) to move code from one place to another.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/UNWIXYSZfZY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="tartanllama-and-mfyz" tabindex="-1">TartanLlama and mfyz <a class="direct-link" href="#tartanllama-and-mfyz" aria-hidden="true">#</a></h2>
<p>The goto Github Action for building Eleventy seems to be TartanLlama's <a href="https://github.com/TartanLlama/actions-eleventy">action-eleventy</a>, however, I had some problems with its optional inputs, and ended up using a fork of this, by <a href="https://github.com/mfyz/actions-eleventy">mfyz</a>. I'll probably revisit this (as I will with the whole process) because there's no reason TartanLlama's shouldn't work.</p>
<p>And that's that.</p>
<p>My <code>yaml</code> file runs whenever anything's pushed to the main branch of the repo, takes a copy of the latest code, builds it using <code>actions-eleventy</code>, and then copies it over to my web host. Decent.</p>
<p>What I might do is setup a staging repo and sub-domain, in case I want to work on any major changes but, for now, that's good enough for a Saturday night.</p>
<p>NB I appreciate that there's more to Continuous Integration than just this, calm doon.</p>
<h2 id="update" tabindex="-1">Update <a class="direct-link" href="#update" aria-hidden="true">#</a></h2>
<p>Immediately after I posted this, the build/deployment process stopped working. For about an hour I tried a few different things, and then I headed over to the 11ty Discord channel.</p>
<p>On a Saturday night, a user called <strong>Aankhen</strong> took me through the issue I was having, jumped into my repo and flagged any <code>yaml</code> syntax issues (there were a few!) and basically held my hand as I fixed the problem. What a hero. Here's to you, Aankhen! üç∫</p>
<h3 id="change-to-the-build-process" tabindex="-1">Change to the build process <a class="direct-link" href="#change-to-the-build-process" aria-hidden="true">#</a></h3>
<p>As a result of Aankhen's help, I'm no longer using the Action I mentioned above - and I never really needed to - so the process is even simpler now.</p>
<h2 id="resources" tabindex="-1">Resources <a class="direct-link" href="#resources" aria-hidden="true">#</a></h2>
<ul>
<li><a href="https://github.com/rnnbrwn/project_ronnie.fyi/blob/main/.github/workflows/build-production.yml">My build-production.yml</a></li>
<li><a href="https://www.youtube.com/watch?v=UNWIXYSZfZY">Deploy to Shared Hosting Using Github Actions</a></li>
<li><a href="https://github.com/TartanLlama">TartanLlama's repo</a></li>
<li><a href="https://github.com/mfyz">mfyz's repo</a></li>
<li><a href="https://discord.gg/GBkBy9u">11ty Discord</a></li>
</ul>

<hr>
<ul><li>Next: <a href="/posts/new-year-resolutions/">New Year Resolutions</a></li><li>Previous: <a href="/posts/a-history-of-web-development/">A History of Web Development</a></li>
</ul>

    </main>

    <footer></footer>

    <!-- Current page: /posts/continuous-integration/ -->
  </body>
</html>
